# -*- coding: utf-8 -*-



<%namespace name="modals" file="/dagr/components/modals.html"/>
<%namespace name="baseForms" file="/dagr/components/forms.html"/> 
<%namespace name="nav" file="/dagr/components/navigation.html"/> 

<div class="btn-Object">
	<a href="#addObjectModal" role="button" class="btn btn-default" data-toggle="modal">Add
		new object</a>
</div>
<div style="height:15px"/>
<% 
foundObject=False 
fistObjectID=0
selected = True
%>
<!--list of objects -->
<script type="text/javascript">
function loadObject(objectID){
	loadContent('objectRight','/admin/objects/rightContent?objectid='+objectID);
}
</script>

<ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
	%if not objects is None: 
		% for object in objects:
		  <%call expr="nav.leftMenuItem(object.identifier, 'loadObject({0})'.format(object.identifier),object.name,selected)"/>
		  <%
		  if not foundObject:
		      fistObjectID = object.identifier
		      foundObject=True
		      selected = False
		  %>
		% endfor 
	%endif
	
</ul>

<!-- AddObjectForm -->
<%call expr="baseForms.genericModalForm(modalID='addObjectModal',
                                    url='/admin/objects/modifyObject',refreshUrl='/admin/objects', refreshContainer='adminTabsTabContent')">
<input type="hidden" name="action" value="insert">
<%call expr="modals.saveButtonModal(id='addObjectModal',title='Add object',contentUrl='/admin/objects/addObject')"/>
</%call>

<script type="text/javascript">
$(document).ready(function() {
	loadObject(${fistObjectID});
});
</script>