# -*- coding: utf-8 -*-

<%namespace name="modals" file="/dagr/components/modals.html"/>
<%namespace name="baseForms" file="/dagr/components/forms.html"/> 
<%namespace name="nav" file="/dagr/components/navigation.html"/> 

<div class="btn-Object">
	<a href="#addAttributeModal" role="button" class="btn btn-default" data-toggle="modal">Add
		new attribute</a>
</div>
<div style="height:15px"/>
<% 
foundAttribute=False 
fistAttributeID=0
selected = True
%>
<!--list of attributes -->
<script type="text/javascript">
function loadAttribute(attributeID){
	loadContent('attributeRight','/admin/attributes/rightContent?attributeid='+attributeID);
}
</script>
<div style="height: 800px;
   overflow: scroll;">
<ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
	%if not attributes is None: 
		% for attribute in attributes:
		  <%call expr="nav.leftMenuItem(attribute.identifier, 'loadAttribute({0})'.format(attribute.identifier),attribute.name,selected)"/>
		  <%
		  if not foundAttribute:
		      fistAttributeID = attribute.identifier
		      foundAttribute=True
		      selected=False
		  %>
		  
		  
		% endfor 
	%endif
	
</ul>
</div>
<!-- AddAttributeForm -->
<%call expr="baseForms.genericModalForm(modalID='addAttributeModal',
                                    url='/admin/attributes/modifyAttribute',
                                    refreshUrl='/admin/attributes', 
                                    refreshContainer='adminTabsTabContent')">
<input type="hidden" name="action" value="insert">
<%call expr="modals.saveButtonModal(id='addAttributeModal',title='Add attribute',
                               contentUrl='/admin/attributes/addAttribute')"/>
</%call>

<script type="text/javascript">
$(document).ready(function() {
	loadAttribute(${fistAttributeID});
});
</script>