# -*- coding: utf-8 -*-

<%namespace name="c17Works" module="c17Works.web.helpers.string"/>
<%namespace name="messagesAndText" file="/c17Works/components/messagesAndText.html"/>


<%def name="textBox(name, message, cols=40, rows=5 ,enabled=True, validationMsg=None)">
	<!-- BEGIN textBox --><%
	if message is None:
	  message = ''
	  
	if (enabled):
	  enabledStr = ''
	else:
	  enabledStr =  ' disabled ' 
	
	if hasattr(message,'error'):
	  validationMsg = getattr(message,'error')
	%>
	%if enabled or message is None:
	    <textarea id="${name}ID" name="${name}" cols="${cols}" rows="${rows}"  ${enabledStr} >${message}</textarea>
	%else:
	    <div style="padding: 5px;overflow:auto; height:${rows*25}px">
	      ${c17Works.plaintext2html(text=message)}
	    </div>
	%endif
	
	% if (not (validationMsg is None)):
	  <%call expr="messagesAndText.error(validationMsg)"/>
	% endif
	<!-- END textBox -->
</%def>




<%def name="passowdBox(name, value, enabled=True, validationMsg=None)">
	<!-- BEGIN passowdBox --><%
	if (enabled):
	  enabledStr = ''
	else:
	  enabledStr =  ' disabled ' 
	
	if hasattr(value,'error'):
	  validationMsg = getattr(value,'error')
	
	if value is None:
	  value = ''
	%>
	%if enabled or value is None:
	    <input id="${name}ID" name="${name}" type="password" value="${value}" ${enabledStr}/>
	%else:
	    <div style="padding: 5px;">
	      %if value == 'EXTERNALAUTH':
	      ${value}
	      %else:
	      7h15P455\/\/0rd15S3cr3t
	      %endif
	    </div>
	%endif
	% if (not (validationMsg is None)) and enabled:
	  <%call expr="messagesAndText.error(validationMsg)"/>
	% endif
	<!-- END passowdBox -->
</%def>




<%def name="editBox(name, value, enabled=True, validationMsg=None)">
	<!-- BEGIN editBox --><%
	if (enabled):
	  enabledStr = ''
	else:
	  enabledStr =  ' disabled ' 
	
	if hasattr(value,'error'):
	  validationMsg = getattr(value,'error')
	
	if value is None:
	  value = ''
	%>
	
	%if enabled or value is None:
	    <input id="${name}ID" name="${name}" type="text" value="${value}" ${enabledStr}/>
	%else:
	    <div style="padding: 5px;">
	      ${value}
	    </div>
	%endif
	% if (not (validationMsg is None)) and enabled:
	  <%call expr="messagesAndText.error(validationMsg)"/>
	% endif
	<!-- END editBox -->
</%def>




<%def name="comboBox(name, values, enabled=True, selected=None, validationMsg=None, hasEmpty=False)">
	<!-- BEGIN comboBox --><%
	if (enabled):
	  enabledStr = ''
	else:
	  enabledStr =  ' disabled ' 
	
	if not selected is None and hasattr(selected,'error'):
	  validationMsg = getattr(selected,'error')
	
	hasDataContent=False
	dataToggle=''
	 %>
	%if enabled or selected is None:
	 <select id="${name}ID" name="${name}" ${enabledStr}>
	  %if not values is None:
	    %if hasEmpty:
	        %if not selected:
	        <option value="" data-toggle="tooltip" title="Empty Value. Please Select one." selected></option>
	        %else:
	        <option value="" data-toggle="tooltip" title="Empty Value. Please Select one."></option>
	        %endif
	    %endif
	    %if not values is None:
	        %for key, value in values.iteritems():
	            <%
	            if isinstance(value, tuple):
	               title = 'title="{0}"'.format(value[1])
	               value = value[0]
	               if not hasDataContent:
	                 hasDataContent = True
	                 dataToggle='data-toggle="tooltip"'
	            else:
	               title = ''
	            %>
	            %if not selected is None and value == selected:
	              <option value="${value}" ${dataToggle} ${title} selected>${key}</option>
	            %else:
	              <option value="${value}" ${dataToggle} ${title} >${key}</option>
	            %endif
	        %endfor
	    %endif
	  %endif 
	</select> 
	%else:
	    <div style="padding: 5px">
	        %for key, value in values.iteritems():
	           <%
                if isinstance(value, tuple):
                   value = value[0]
                    
                %>
	        
	            %if not selected is None and value == selected:
	              ${key}
	              <input type="hidden" id="${name}ID" value="${value}"/>
	            %endif
	        %endfor
	    </div>
	%endif
	% if (not (validationMsg is None)) and enabled:
	  <%call expr="messagesAndText.error(validationMsg)"/>
	% endif
	<!-- END comboBox -->
</%def>








<%def name="dateTimePicker(name, value, enabled=True, validationMsg=None)">
<!-- BEGIN dateTimePicker --><%
    
    dateTime = '' 
    if hasattr(value,'error'):
      validationMsg = getattr(value,'error')
      dateTime = getattr(value,'value')
    else:
      if value is None:
        dateTime = ''
      else:
        dateTime = ''
    nameTag = ''
    if enabled:
      nameTag='name="{0}" id="{0}ID"'.format(name)

%>
%if enabled or dateTime is None:
<div class="input-append date form_datetime" data-date="21/02/2013T15:25:00Z">
    <input  size="16" type="text" value="${dateTime}" readonly style="width:152px" ${nameTag}>
    %if enabled:
    <span class="add-on "><i class="icon-remove" ></i></span>
    <span class="add-on"><i class="icon-th"></i></span>
    %endif
</div>
%else:
<div style="padding: 5px">
    ${dateTime}
</div>
%endif


%if enabled:
<script type="text/javascript">
    $(".form_datetime").datetimepicker({
         format: "dd/mm/yyyy - hh:ii",
         autoclose: true,
         todayBtn: true,
         minuteStep: 10,
         % if dateTime:
              startDate: "${dateTime}",
        %endif
        });
</script> 
%endif
% if (not (validationMsg is None)) and enabled:
  <%call expr="messagesAndText.error(validationMsg)"/>
% endif

<!-- END dateTimePicker -->
</%def>





